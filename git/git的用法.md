------

# Git 全能实战手册 

### 一、 Git 配置与初始化 (起步)

可以在cmd界面直接执行，也可以先打开终端输入

```
code .  
```

打开vscode，在code的终端执行（推荐）



在开始任何推送之前，必须先让 Git 认识你并建立联系：

- **配置身份**：执行 `git config --global user.name "你的名字"` 和 `git config --global user.email "你的邮箱"`。
- **初始化仓库**：在目标项目文件夹执行 `git init`。 
- **关联远程库**：`git remote add origin <远程仓库URL>`。
- **一般在关联别人的仓库时需要拉取别人的一条分支：**
- 先拉取云端想要的分支，这时候还没存入本地`git fetch origin <branch_name>`
- 先在本地创建并切换到一个分支，名称与你要拉取的分支名称一样``git checkout -b <branch_name> origin/<branch_name>``
- 然后`git pull origin <branch_name>`
- 如果不同拉取的不同分支里有相同的文件名但内容不同，那么切换到不同分支，在本地看到的文件内容是与分支内容各自对应

------

### 二、 更新“三部曲” (日常)

Git 的核心操作逻辑是：**改动文件 -> 暂存 -> 存档 -> 同步**。

#### 1. 暂存 (Add)

- **添加全部文件**：`git add .` (包括新增、修改和删除的文件)。
- **只添加部分文件**：`git add <文件名或路径>`。 加入多个文件只需要在文件之间加入空格
- **界面等效**：点击 VS Code 源代码管理面板中“更改”列表旁边的 **`+`** 号。

#### 2. 提交 (Commit)

- **标准指令**：`git commit -m "提交说明"`。

- **关于 `-m` 参数**：
  - **必须性**：每次提交必须有说明。如果不加，Git 会强制进入 Vim 等编辑器要求你补全。
  
  - **作用**：在 Git 历史中标记你这次干了什么（如 "fix: 修复bug"）。
  

### 可以安装配置git cz 更规范

安装

```
npm install -g commitizen
```

安装全局适配器

```
npm install -g cz-conventional-changelog
```

在用户根目录：`C\Users\名称`  下新建一个名为 `.czrc`文件,文件内容为

```
{
  "path": "cz-conventional-changelog"
}
```



#### 3. 推送 (Push) 若push失败则先pull再push

- **首次推送**：`git push -u origin main` (或 master，也就是分支)。

- ```
  git branch             //可以查看分支
  ```

- **关于 `-u` 参数**：

  - **绑定关系**：它将本地分支与远程分支关联。
  - **简化后续**：此后只需输入 `git push` 即可，无需指定仓库名。

- **关于 `-f` 参数**：**强制覆盖**。仅在远程历史与本地冲突且你确定要以本地为准时使用。

- ```
  git push -u origin main -f
  ```

------

### 三、 拉取更新 (Pull)

当 GitHub 上的代码比你本地新时（比如你在另一台电脑改了代码）

或者连接别人仓库时需要先同步一下：

- **指令**：`git pull origin main/或其他分支`。
- **作用**：将云端的最新版本合并到你的本地工作区。

------

### 四、 .gitignore 高级用法 (黑名单模式)

采用“先全部忽略，再排除特定”的模式，管理最清爽。

#### 1. 规则示例

相当于过滤器，用来批量操作。此时

```
git add .
```

会遵顼这个规则加入文件

```
/* # 忽略当前目录下所有文件和文件夹
!.gitignore  # 排除 .gitignore，使其不被忽略
!/test/** # 排除 test 文件夹，使其内容可被追踪
!/text/** # 排除 text 文件夹，使其内容可被追踪
```

按下 `Ctrl + S` 保存。此时你会发现 VS Code 左侧树状图中，被忽略的文件夹颜色会变淡。

#### 2. 缓存清理 (当忽略规则不生效时)

- **清除全部索引缓存**：`git rm -r --cached .`。
  - *逻辑*：抹除 Git 脑子里的所有追踪名单，然后你再执行 `git add .` 重新按新规则识别。
- **清除单个文件缓存**：`git rm --cached <文件名>`。

------

### 五、 删除云端文件的方法

1. **彻底删除 (本地和云端都不留)**：
   - **操作**：在本地物理删除文件 -> `git add .` -> `git commit -m "delete: ..." ` -> `git push`。
   - **结果**：两端同步消失。
2. **仅删云端 (本地保留文件)**：常用
   - **操作**：`git rm --cached <文件名>` -> 修改 `.gitignore` 忽略该文件 -> `git commit` -> `git push`。
   - **结果**：本地磁盘保留文件，但 GitHub 仓库中该文件被移除。
3. **不改变云端但删除了对应的本地文件 (从云端拉了无用文件一直显示惹人烦)**：常用
   
   - **操作**：
   
     ```
     git update-index --assume-unchanged <文件名>
     ```
   - **可随时恢复追踪**：
   
     ```
     git update-index --no-assume-unchanged <文件名>
     ```
------

### 六、 VS Code 界面功能对照

- **数字标记**：VS Code 图标上的数字代表你还没 `add` 的改动数量。
- **状态字母**：**M** (Modified/已修改), **U** (Untracked/新文件), **D** (Deleted/已删除)。
- **同步按钮**：底部的循环箭头图标等效于执行 `pull` 和 `push`。

------
### 七、 分支创建与融合

------

# Git 常用指令笔记

### 1. 分支管理 (Branch Management)

| **命令**                        | **说明**                                    |
| ------------------------------- | ------------------------------------------- |
| `git checkout -b <branch_name>` | **创建并切换**到一个新分支。                |
| `git checkout <branch_name>`    | **切换**到已存在的指定分支（如 `master`）。 |
| `git branch -d <branch_name>`   | **删除**指定的本地分支。                    |

------

### 2. 更新与合并 (Update & Merge)

| **命令**                     | **说明**                                                     |
| ---------------------------- | ------------------------------------------------------------ |
| `git pull`                   | **更新**本地仓库至最新改动。它会获取 (fetch) 并合并 (merge) 远端的改动。 |
| `git diff <source> <target>` | 在合并改动之前，**预览**两个分支之间的差异。                 |
| `git merge <branch_name>`    | 将指定分支**合并**到你当前所在的分支。                       |
| `git add <filename>`         | 在遇到合并冲突 (conflicts) 时，手动修改完文件后，使用此命令将它们**标记为合并成功**。 |

------

### 3. 分支推送与删除 

| **功能**               | **指令**                            | **说明**                                               |
| ---------------------- | ----------------------------------- | ------------------------------------------------------ |
| **删除本地分支**       | `git branch -d <分支名>`            | 在本地仓库中删除指定的分支。                           |
| **删除云端分支**       | `git push origin --delete <分支名>` | 将删除操作同步到云端，从远程仓库中彻底删除该分支。     |
| **推送本地分支到云端** | `git push origin <分支名>`          | 将本地分支及其提交记录推送到云端仓库，使其对他人可见。 |

------

### ⚠️ 重要特性强调：本地分支的可见性

在 Git 的使用中，有一个核心概念必须明确：

> **“隐身”规则：**
>
> 只要你没有执行 `git push` 命令将分支推送到远端仓库，你所创建的所有分支、所做的所有代码修改、甚至是删除分支的操作，**全部都只存在于你的本地计算机上**。
>
> - **云端不可见：** 在执行推送之前，云端仓库（如 GitHub、GitLab）和其他协作者完全看不到这个分支。
> - **安全性：** 这意味着你可以在本地大胆地创建无数个类似 `wzs_test` 的临时分支进行实验，只要不 `push`，就不会污染远端的代码库。






### 八、 版本回退

#### 1.网页仓库的commit进行回退

#### 2.查看版本哈希值 -> 回退到对应的版本

```
git log -n <number> --oneline    // 查看版本哈希值 number为要查看几个版本  当前未push的版本是无哈希值的
```

```
git checkout <提交的哈希值>  //查看对应版本内容但不改变  此时文件的内容都是过去内容 
```

```
git switch -  // 回到当前版本
```

####  回退到上一个版本

```
git reset --hard HEAD^
```
####  或者回退到指定的某个版本
```
git reset --hard <提交的哈希值>
```

### 九、标签

刚刚提到了哈希值，哈希值位数长，比较麻烦

可以通过贴标签的方式给哈希值起别名

```
git tag <标签> <哈希值>  //若忽略哈希值，则是为云端最新版本打标签
```

```
git tag //查看所有标签
```

```
git push origin <标签> // 标签需要单独push
```

**要记住，要先push内容，再git tag才能标记到你刚刚提交的，要是先git tag了，会标记到云端最新的一个版本，因为这里标签的逻辑是标签云端最新版本哈希值，而不是本地**



```
git tag -d <标签> 删除本地存储的标签
git push origin --delete <标签>   删除云端标签
```



### 帮助指令 

```
git --help
```

