------

# Git 全能实战手册 

### 一、 Git 配置与初始化 (起步)

在开始任何推送之前，必须先让 Git 认识你并建立联系：

- **配置身份**：执行 `git config --global user.name "你的名字"` 和 `git config --global user.email "你的邮箱"`。
- **初始化仓库**：在目标项目文件夹执行 `git init`。
- **关联远程库**：`git remote add origin <远程仓库URL>`。

------

### 二、 更新“三部曲” (日常)

Git 的核心操作逻辑是：**改动文件 -> 暂存 -> 存档 -> 同步**。

#### 1. 暂存 (Add)

- **添加全部文件**：`git add .` (包括新增、修改和删除的文件)。
- **只添加部分文件**：`git add <文件名或路径>`。 加入多个文件只需要在文件之间加入空格
- **界面等效**：点击 VS Code 源代码管理面板中“更改”列表旁边的 **`+`** 号。

#### 2. 提交 (Commit)

- **标准指令**：`git commit -m "提交说明"`。
- **关于 `-m` 参数**：
  - **必须性**：每次提交必须有说明。如果不加，Git 会强制进入 Vim 等编辑器要求你补全。
  - **作用**：在 Git 历史中标记你这次干了什么（如 "fix: 修复bug"）。

#### 3. 推送 (Push) 若push失败则先pull再push

- **首次推送**：`git push -u origin main` (或 master，也就是分支)。

- ```
  git branch             //可以查看分支
  ```

- **关于 `-u` 参数**：

  - **绑定关系**：它将本地分支与远程分支关联。
  - **简化后续**：此后只需输入 `git push` 即可，无需指定仓库名。

- **关于 `-f` 参数**：**强制覆盖**。仅在远程历史与本地冲突且你确定要以本地为准时使用。

- ```
  git push -u origin main -f
  ```

------

### 三、 拉取更新 (Pull)

当 GitHub 上的代码比你本地新时（比如你在另一台电脑改了代码）：

- **指令**：`git pull origin main`。
- **作用**：将云端的最新版本合并到你的本地工作区。

------

### 四、 .gitignore 高级用法 (黑名单模式)

采用“先全部忽略，再排除特定”的模式，管理最清爽。

#### 1. 规则示例

相当于三部曲的git add

```
/* # 忽略当前目录下所有文件和文件夹
!.gitignore  # 排除 .gitignore，使其不被忽略
!/test/** # 排除 test 文件夹，使其内容可被追踪
!/text/** # 排除 text 文件夹，使其内容可被追踪
```

按下 `Ctrl + S` 保存。此时你会发现 VS Code 左侧树状图中，被忽略的文件夹颜色会变淡。

#### 2. 缓存清理 (当忽略规则不生效时)

- **清除全部索引缓存**：`git rm -r --cached .`。
  - *逻辑*：抹除 Git 脑子里的所有追踪名单，然后你再执行 `git add .` 重新按新规则识别。
- **清除单个文件缓存**：`git rm --cached <文件名>`。

------

### 五、 删除云端文件的方法

1. **彻底删除 (本地和云端都不留)**：
   - **操作**：在本地物理删除文件 -> `git add .` -> `git commit -m "delete: ..." ` -> `git push`。
   - **结果**：两端同步消失。
2. **仅删云端 (本地保留文件)**：常用
   - **操作**：`git rm --cached <文件名>` -> 修改 `.gitignore` 忽略该文件 -> `git commit` -> `git push`。
   - **结果**：本地磁盘保留文件，但 GitHub 仓库中该文件被移除。

------

### 六、 VS Code 界面功能对照

- **数字标记**：VS Code 图标上的数字代表你还没 `add` 的改动数量。
- **状态字母**：**M** (Modified/已修改), **U** (Untracked/新文件), **D** (Deleted/已删除)。
- **同步按钮**：底部的循环箭头图标等效于执行 `pull` 和 `push`。

------

